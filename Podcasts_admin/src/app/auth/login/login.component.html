<nb-layout>
  <nb-layout-column>
    <nb-card>
      <nb-card-body>
        <div class="container">
          <h1 id="title" class="title text-center">Đăng nhập</h1>
          <!-- <p class="sub-title text-center">Đăng nhập tài khoản để vào admin.</p> -->
          <ngx-alerts [messages]="alertMessages"></ngx-alerts>
          <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" method="post" aria-labelledby="title">
            <div class="form-control-group mb-3">
              <label class="label" for="username">Tài khoản:</label>
              <input nbInput fullWidth name="username" formControlName="username" required id="username"
                pattern="^[a-z0-9]+$" placeholder="Tài khoản...." class="form-control" status="success" autofocus>
              <div
                *ngIf="loginForm.get('username').invalid && (loginForm.get('username').dirty || loginForm.get('username').touched)">
                <small *ngIf="loginForm.get('username').hasError('required')">
                  <i class="text-danger">Vui lòng nhập tài khoản.</i>
                </small>
                <small *ngIf="loginForm.get('username').hasError('pattern')">
                  <i class="text-danger">Tài khoản không chứa chữ hoa và ký tự đặc biệt.</i>
                </small>
              </div>
            </div>


            <div class="form-control-group mb-3 input-container">
              <label class="label" for="password">Mật khẩu:</label>
              <input nbInput formControlName="password" required name="password" fullWidth status="success"
                     id="password" placeholder="Mật khẩu..." [type]="passwordFieldType" class="form-control">
              
              <!-- Icon hiển thị mật khẩu -->
              <nb-icon *ngIf="isPasswordVisible" icon="eye-outline" pack="eva" class="fs-3 input-icon" (click)="togglePasswordVisibility()"></nb-icon>
              
              <!-- Icon ẩn mật khẩu -->
              <nb-icon *ngIf="!isPasswordVisible" icon="eye-off-outline" pack="eva" class="fs-3 input-icon" (click)="togglePasswordVisibility()"></nb-icon>
              <div
                *ngIf="loginForm.get('password').invalid && (loginForm.get('password').dirty || loginForm.get('password').touched)">
                <small *ngIf="loginForm.get('password').hasError('required')">
                  <i class="text-danger">Vui lòng nhập mật khẩu.</i>
                </small>
              </div>
            </div>

            <div class="form-control-group remember accept-group  mb-3 d-flex justify-content-between">
              <nb-checkbox name="rememberMe" status="success">Ghi nhớ tôi?</nb-checkbox>
              <a class="forgot-password" routerLink="../request-password">Quên mật khẩu?</a>
            </div>
            <button nbButton type="submit" class="mb-3 form-control" [disabled]="!loginForm.valid" status="success">Đăng nhập
            </button>
          </form>
        </div>
      </nb-card-body>
    </nb-card>
  </nb-layout-column>
</nb-layout>